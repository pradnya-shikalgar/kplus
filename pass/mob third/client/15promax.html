<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KPlus - iPhone 15 Pro Repair</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background: #f8f9fa;
      color: #222;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 30px;
      background: #fff;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    header .logo {
      font-size: 24px;
      font-weight: bold;
      color: red;
    }

    .location-dropdown {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    select, button {
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    .add-btn, .book-btn, .remove-btn {
      background: red;
      color: white;
      border: none;
      cursor: pointer;
      transition: background 0.3s;
    }

    .add-btn:hover, .book-btn:hover, .remove-btn:hover {
      background: #d40000;
    }

    .add-btn, .book-btn, .remove-btn {
      margin-top: 10px;
    }

    main {
      max-width: 1200px;
      margin: 40px auto;
      padding: 0 20px;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .services {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 20px;
    }

    .card {
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      width: 230px;
      padding: 15px;
      text-align: center;
      transition: transform 0.3s;
    }

    .card:hover {
      transform: translateY(-5px);
    }

    .card img {
      width: 80px;
      height: 80px;
      object-fit: contain;
    }

    .card h3 {
      margin: 10px 0;
      font-size: 16px;
    }

    .card p {
      margin: 5px 0;
      font-size: 14px;
    }

    .card s {
      color: #999;
      margin-left: 5px;
    }

    footer {
      margin-top: 50px;
      padding: 20px;
      background: #222;
      color: #ccc;
      text-align: center;
    }

    .price-details {
      background: white;
      border-radius: 10px;
      padding: 20px;
      margin-top: 30px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .price-details h3 {
      margin-top: 0;
      border-bottom: 1px solid #eee;
      padding-bottom: 10px;
    }

    .total-amount {
      display: flex;
      justify-content: space-between;
      font-weight: bold;
      font-size: 18px;
      margin-top: 20px;
      padding-top: 10px;
      border-top: 1px solid #eee;
    }

    .pickup-note {
      font-size: 14px;
      color: #666;
      margin-top: 10px;
      text-align: center;
    }

    .selected-services {
      margin-top: 20px;
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .selected-services h3 {
      margin-top: 0;
      border-bottom: 1px solid #eee;
      padding-bottom: 10px;
    }

    .service-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .service-item:last-child {
      border-bottom: none;
    }

    /* Popup Notification Styles */
    .popup-notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #333;
      color: white;
      padding: 15px 25px;
      border-radius: 5px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      z-index: 1000;
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s ease;
      max-width: 300px;
    }

    .popup-notification.show {
      transform: translateY(0);
      opacity: 1;
    }

    .popup-notification.success {
      background-color: #4CAF50;
    }

    .popup-notification.error {
      background-color: #f44336;
    }

    .popup-notification.info {
      background-color: #2196F3;
    }

    .popup-notification .close-btn {
      position: absolute;
      top: 5px;
      right: 10px;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }
  </style>
</head>

<body>
<header>
  <div class="logo">KPlus</div>
  <div class="location-dropdown">
    <label for="location">Location:</label>
    <select id="location">
      <option>Islampur</option>
      <option>Sangli</option>
      <option>Kolhapur</option>
      <option>Karad</option>
    </select>
  </div>
</header>

<main>
  <div class="top-bar">
    <h2 id="modelTitle">Apple iPhone 15 Pro - Pick Your Repair Service</h2>
  </div>

  <div class="services" id="serviceList">
    <!-- Cards generated by JS -->
  </div>

  <div class="selected-services" id="selectedServicesList" style="display: none;">
    <h3>Selected Services</h3>
    <div id="selectedServicesContainer"></div>
  </div>

  <div class="price-details">
    <h3>Price Details</h3>
    <div class="total-amount">
      <span>Total Amount</span>
      <span id="totalAmount">₹0</span>
    </div>
    <p class="pickup-note">Pick and Drop Available for this service</p>
    <button class="book-btn" onclick="bookRepair()" style="width: 100%; padding: 12px; margin-top: 15px;">Book Repair</button>
  </div>
</main>

<!-- Popup Notification -->
<div id="popupNotification" class="popup-notification">
  <span class="close-btn" onclick="hidePopup()">&times;</span>
  <div id="popupMessage"></div>
</div>

<footer>
  &copy; 2025 KPlus | <a href="#" style="color: #ccc;">Privacy Policy</a> | <a href="#" style="color: #ccc;">Terms of Service</a>
</footer>

<script>
  const services = [
    { 
      name: "Display Broken", 
      price: "₹34,400",  // Reduced by 14% from ₹40,000
      old: "₹55,000", 
      image: "https://cdn-icons-png.flaticon.com/512/785/785116.png" 
    },
    { 
      name: "Battery Issue", 
      price: "₹8,599",  // Reduced by 14% from ₹9,999
      image: "https://cdn-icons-png.flaticon.com/512/3103/3103446.png" 
    },
    { 
      name: "Charging Issue", 
      price: "₹8,212",  // Reduced by 14% from ₹9,549
      image: "https://cdn-icons-png.flaticon.com/512/1172/1172426.png" 
    },
    { 
      name: "Back Panel Broken", 
      price: "₹10,835",  // Reduced by 14% from ₹12,599
      old: "₹17,000", 
      image: "https://cdn-icons-png.flaticon.com/512/901/901274.png" 
    },
    { 
      name: "Broken Screen Glass Replacement", 
      price: "₹13,759",  // Reduced by 14% from ₹15,999
      old: "₹18,000", 
      image: "https://cdn-icons-png.flaticon.com/512/785/785116.png" 
    },
    { 
      name: "Complete Device Checkup", 
      price: "₹14,619",  // Reduced by 14% from ₹16,999
      old: "₹24,000", 
      image: "https://cdn-icons-png.flaticon.com/512/3652/3652191.png" 
    },
    { 
      name: "Face ID & TrueDepth Camera Repair", 
      price: "₹26,315",  // Reduced by 14% from ₹30,599
      old: "₹35,000", 
      image: "https://cdn-icons-png.flaticon.com/512/3468/3468374.png" 
    },
    { 
      name: "Receiver Issue", 
      price: "₹11,179",  // Reduced by 14% from ₹12,999
      image: "https://cdn-icons-png.flaticon.com/512/876/876019.png" 
    },
  ];

  const selectedServices = [];
  let totalAmount = 0;

  function renderServices() {
    const container = document.getElementById("serviceList");
    container.innerHTML = "";
    services.forEach((item, index) => {
      const oldPrice = item.old ? `<s>${item.old}</s>` : "";
      container.innerHTML += `
        <div class="card">
          <img src="${item.image}" alt="${item.name}">
          <h3>${item.name}</h3>
          <p>${item.price} ${oldPrice}</p>
          <button class="add-btn" onclick="addToCart(${index})">Add</button>
        </div>
      `;
    });
  }

  function addToCart(index) {
    const service = services[index];
    selectedServices.push(service);
    const price = parseInt(service.price.replace(/[^0-9]/g, ''));
    totalAmount += price;
    updateTotalAmount();
    updateSelectedServices();
    showPopup(`${service.name} added to booking list.`, 'success');
  }

  function removeFromCart(index) {
    const service = selectedServices[index];
    const price = parseInt(service.price.replace(/[^0-9]/g, ''));
    totalAmount -= price;
    selectedServices.splice(index, 1);
    updateTotalAmount();
    updateSelectedServices();
    showPopup(`${service.name} removed from booking list.`, 'error');
  }

  function updateSelectedServices() {
    const container = document.getElementById("selectedServicesContainer");
    const listContainer = document.getElementById("selectedServicesList");
    
    if (selectedServices.length === 0) {
      listContainer.style.display = 'none';
      return;
    }
    
    listContainer.style.display = 'block';
    container.innerHTML = '';
    
    selectedServices.forEach((service, index) => {
      const serviceItem = document.createElement('div');
      serviceItem.className = 'service-item';
      serviceItem.innerHTML = `
        <span>${service.name}</span>
        <span>${service.price} <button class="remove-btn" onclick="removeFromCart(${index})">Remove</button></span>
      `;
      container.appendChild(serviceItem);
    });
  }

  function updateTotalAmount() {
    document.getElementById('totalAmount').textContent = `₹${totalAmount.toLocaleString('en-IN')}`;
  }

  function showPopup(message, type) {
    const popup = document.getElementById('popupNotification');
    const messageEl = document.getElementById('popupMessage');
    
    popup.className = `popup-notification ${type} show`;
    messageEl.textContent = message;
    
    setTimeout(() => {
      hidePopup();
    }, 3000);
  }

  function hidePopup() {
    const popup = document.getElementById('popupNotification');
    popup.classList.remove('show');
  }

  function bookRepair() {
    if (!selectedServices.length) {
      showPopup("Please select a service before booking.", 'error');
      return;
    }

    const orders = JSON.parse(localStorage.getItem("orders") || "[]");
    orders.push({
      date: new Date().toLocaleString(),
      location: document.getElementById("location").value,
      items: selectedServices.map(s => s.name),
      amount: totalAmount,
      status: 'pending'
    });

    localStorage.setItem("orders", JSON.stringify(orders));
    showPopup(`Repair booked successfully!\nTotal Amount: ₹${totalAmount.toLocaleString('en-IN')}`, 'success');
    selectedServices.length = 0;
    totalAmount = 0;
    updateTotalAmount();
    updateSelectedServices();
  }

  document.addEventListener('DOMContentLoaded', function() {
    const model = localStorage.getItem('selectedModel');
    if (model) {
      document.getElementById('modelTitle').textContent = model + ' - Pick Your Repair Service';
    }
    renderServices();
  });
</script>
</body>
</html>